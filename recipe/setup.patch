From dcc07cf1a76043b0f1874b1e56f4736e93515db5 Mon Sep 17 00:00:00 2001
From: Jan Janssen <jan-janssen@users.noreply.github.com>
Date: Tue, 9 Feb 2021 22:22:23 +0100
Subject: [PATCH] setup

---
 setup.py | 7 +++++--
 1 file changed, 5 insertion(+), 2 deletions(-)

diff --git a/setup.py b/setup.py
--- a/setup.py	(revision 91836d8baba33b86423603430836af90c1d8217f)
+++ b/setup.py	(revision 1dd20bb0bb9ce5567193f9cc7f7b3565cb5e5e03)
@@ -4,6 +4,7 @@
 import sysconfig
 import platform
 import subprocess
+import pybind11
 
 from distutils.version import LooseVersion
 from setuptools import setup, find_packages, Extension
@@ -86,9 +86,11 @@
     # and nowhere else
     package_dir={'':'src'},
     # add an extension module named 'python_cpp_example' to the package
-    ext_modules=[CMakeExtension('pyscal/catom'), CMakeExtension('pyscal/csystem')],
+    ext_modules=[
+        Extension("pyscal.catom", ["src/pyscal/atom.cpp", "src/pyscal/atom_binding.cpp"], extra_link_args=[], language='c++', include_dirs=[pybind11.get_include()]),
+        Extension("pyscal.csystem", ["src/pyscal/system.cpp", "src/pyscal/system_binding.cpp"], extra_link_args=[], language='c++', include_dirs=[pybind11.get_include()]),
+    ],
     # add custom build_ext command
-    cmdclass=dict(build_ext=CMakeBuild),
     zip_safe=False,
     download_url = 'https://github.com/srmnitc/pyscal/archive/2.3.4.tar.gz',
     url = 'https://github.com/srmnitc/pyscal',
